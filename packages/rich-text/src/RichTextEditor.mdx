---
name: Rich Text (Alpha)
route: /rich-text
menu: Editors
---

import Readme from '../README.md';

<Readme />

import { Playground } from 'docz';
import { RichTextEditor } from './index';
import {
  createFakeFieldAPI,
  ActionsPlayground,
  createFakeSpaceAPI,
  createFakeLocalesAPI,
  createFakeNavigatorAPI,
} from '@contentful/field-editor-test-utils';
import { BLOCKS } from '@contentful/rich-text-types';
import { document, block, text } from './helpers/nodeFactory';
import { documentToReactComponents } from '@contentful/rich-text-react-renderer';
import { css } from 'emotion';
import publishedEntry from '../../reference/src/__fixtures__/published_entry.json';
import publishedAsset from '../../reference/src/__fixtures__/published_asset.json';

## In Action

<Playground>
{() => {
  window.events = []
  const rtPreviewStyle = css({
    backgroundColor: 'whitesmoke',
    padding: '0 0.5em'
  });
  const newEntitySelectorDummyDialog = (fnName, type) => async () => {
      return {
        sys: {
          id: 'example-entity-id',
          type
        }
      }
    };
  const onAction = (...args) => window.events.push(args);
  const newSdk = (id) => {
    const entry = {...publishedEntry, sys: {...publishedEntry.sys, id }};
    const [field, mitt] = createFakeFieldAPI();
    const space = createFakeSpaceAPI();
    const navigator = createFakeNavigatorAPI();
    const sdk = {
      space: {
        ...space,
        getEntry: () => {
          return Promise.resolve(entry);
        },
        getAsset: () => {
          return Promise.resolve(publishedAsset);
        },
        getEntityScheduledActions: () => {
          return Promise.resolve([]);
        },
        getAssets: () => {
          return Promise.resolve({ items: [publishedAsset] });
        },
      },
      entry: {
        ...entry,
        getSys: () => entry.sys
      },
      field,
      locales: createFakeLocalesAPI(),
      navigator: {
        ...navigator,
        onSlideInNavigation: () => {
          return () => {
          };
        }
      },
      dialogs: {
        selectSingleAsset: newEntitySelectorDummyDialog('selectSingleAsset', 'Asset'),
        selectSingleEntry: newEntitySelectorDummyDialog('selectSingleEntry', 'Entry')
      },
      access: {
        can: (access, entityType) => {
          if (entityType === 'Asset') {
            if (access === 'create') {
              return Promise.resolve(false);
            }
            if (access === 'read') {
              return Promise.resolve(true);
            }
          }
          return Promise.resolve(false);
        }
      },
      parameters: {
        instance: {
          getEntryUrl: () => '#'
        }
      },
      events: []
    };

    window.richTextField = field;
    return {sdk,mitt};
  }
  const renderRT = (value, type) => {
    const logValue = () => {
      console.log(type, value);
    };
    const valueString = JSON.stringify(value, null, 2);
    const valueDom = documentToReactComponents(value);
    return (
      <div className = { rtPreviewStyle }
    title = { valueString }
    onClick = { logValue } >
      { valueDom }
      < /div>
  );
  };

  const {sdk: sdk1,mitt: mitt1} = newSdk('entry-id-1')
  const {sdk: sdk2,mitt: mitt2} = newSdk('entry-id-2')
  return (
      <div data-test-id="rich-text-editor-integration-test">
        <RichTextEditor
          sdk={sdk1}
          onAction={onAction}
          isInitiallyDisabled={false}
        />
        <RichTextEditor
          sdk={sdk2}
          onAction={onAction}
          isInitiallyDisabled={false}
        />
        <ActionsPlayground mitt={mitt1} renderValue={renderRT} />
        <ActionsPlayground mitt={mitt2} renderValue={renderRT} />
      </div>
    );

}}

</Playground>

## As field app

```js
import { RichTextEditor, renderRichTextDialog } from '@contentful/field-editor-rich-text';

/// your app code
init((sdk) => {
  if (sdk.location.is(locations.LOCATION_DIALOG)) {
    render(renderRichTextDialog(sdk), document.getElementById('root'));
  } else if (sdk.location.is(locations.LOCATION_ENTRY_FIELD)) {
    render(<RichTextEditor sdk={sdk} isInitiallyDisabled={true} />, document.getElementById('root'));
  }
});
```
